# 全平台内容分发 Chrome 扩展

上传文档文件后自动提取标题、封面与正文，在扩展内编辑后一键同步到小红书、知乎、腾讯云创作者平台等发布页并自动填充内容。
同时提供独立的知乎媒体下载页面，可解析知乎回答/问题/文章中的图片与视频并下载。

## 安装

1. 打开 Chrome，进入 `chrome://extensions/`
2. 开启右上角「开发者模式」
3. 点击「加载已解压的扩展程序」
4. 选择本仓库的根目录（即包含 `manifest.json` 的文件夹）

## 使用步骤

1. **打开分发页**：点击浏览器工具栏中的扩展图标，会在新标签页打开「内容分发」页面。
2. **上传文档**：点击「选择文档」或将文件拖拽到上传区域。
3. **自动提取**：扩展自动提取标题、封面和正文并填充到右侧编辑区。
4. **编辑**：可修改标题、封面 URL、正文（支持粗体、斜体、列表等简单格式）。
5. **选择平台**：在底部勾选要同步的平台（小红书、知乎、腾讯云创作者平台）。
6. **同步**：点击「同步」。扩展会依次打开各平台发布页，并尝试自动填充标题和正文。
7. **检查与发布**：若某平台未自动填充或填充不完整，请在该平台页面手动粘贴；确认无误后在各平台自行点击发布。

## 知乎图片/视频下载

### 功能入口

- 打开扩展主页面后，点击底部 `知乎图片/视频下载` 按钮进入独立页面。

### 使用步骤

1. 输入知乎链接（支持回答、问题、文章）。
2. 点击 `解析`，等待图片和视频列表展示。
3. 可点击每张图片/每个视频的 `下载` 按钮单独下载。
4. 点击底部 `全部下载 ZIP`，将当前解析到的资源打包下载。

### 支持链接格式

- `https://www.zhihu.com/question/<question_id>/answer/<answer_id>`
- `https://www.zhihu.com/question/<question_id>`
- `https://zhuanlan.zhihu.com/p/<article_id>`
- `https://www.zhihu.com/p/<article_id>`

## 支持的文档格式（当前版本）

- `.md` / `.markdown`
- `.txt`
- `.html` / `.htm`
- `.docx`（自动解析正文并内联图片为 base64）

说明：`.docx` 已支持自动解析；`.pdf` 暂未支持，建议先转 Markdown 或 HTML 再上传。

## 注意事项

- 同步前请先在浏览器中登录对应平台。
- 自动填充依赖平台发布页 DOM 结构，平台改版后可能需要调整选择器。
- 腾讯云创作者平台对自动写入图片限制较多；当正文图片无法直接同步时，扩展会在原位置插入可点击的图片链接，便于手动补图。
- 知乎媒体下载依赖知乎公开接口与媒体地址可访问性，若知乎侧风控或接口变更，可能出现部分资源解析/下载失败。

## 项目结构

- `manifest.json`：扩展配置（Manifest V3）
- `background.js`：点击图标打开分发页、同步消息路由
- `dist.html` / `dist.js` / `dist.css`：文档上传、解析与内容分发主页面
- `zhihu-download.html` / `zhihu-download.js` / `zhihu-download.css`：知乎媒体解析与下载页面
- `vendor/jszip.min.js`：ZIP 打包依赖（兼容 `JSZip` 的轻量实现）
